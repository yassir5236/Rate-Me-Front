<div class="flex items-center justify-center mt-10">
  <div
    class="flex flex-col md:flex-row m-5 w-full bg-white md:max-w-2xl md:rounded-lg md:shadow-lg md:overflow-hidden"
  >
    <div class="md:w-1/2 p-10 py-4">
      <h1 class="text-3xl font-bold text-[#52AFC9]">Travling!</h1>
      <h2 class="mt-6 text-xl font-semibold text-gray-700">Inscription</h2>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="mt-4">
        <div>
          <input
            type="text"
            formControlName="username"
            class="w-full px-4 py-2 mt-2 border border-[#cedbde] rounded focus:outline-none focus:ring-2 focus:ring-[#52AFC9]"
            placeholder="Nom complet"
          />
        </div>

        <div class="mt-4">
          <input
            type="email"
            formControlName="email"
            class="w-full px-4 py-2 mt-2 border border-[#cedbde] rounded focus:outline-none focus:ring-2 focus:ring-[#52AFC9]"
            placeholder="Email"
          />
          <div
            *ngIf="
              registerForm.get('email')?.invalid &&
              registerForm.get('email')?.touched
            "
            class="text-red-500 text-sm"
          >
            <span *ngIf="registerForm.get('email')?.errors?.['required']"
              >L'email est requis.</span
            >
            <span *ngIf="registerForm.get('email')?.errors?.['pattern']"
              >Format d'email invalide.</span
            >
          </div>
        </div>

        <div class="mt-4">
          <input
            type="password"
            formControlName="password"
            class="w-full px-4 py-2 mt-2 border border-[#cedbde] rounded focus:outline-none focus:ring-2 focus:ring-[#52AFC9]"
            placeholder="Mot de passe"
          />
        </div>

        <div
          *ngIf="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
          class="text-red-500 text-sm"
        >
          <span *ngIf="registerForm.get('password')?.errors?.['required']"
            >Mot de passe requis.</span
          >
          <span *ngIf="registerForm.get('password')?.errors?.['minlength']"
            >Minimum 6 caractères.</span
          >
          <span *ngIf="registerForm.get('password')?.errors?.['pattern']">
            Doit contenir au moins une lettre et un chiffre.
          </span>
        </div>

        <div class="mt-4">
          <input
            type="password"
            formControlName="confirmPassword"
            class="w-full px-4 py-2 mt-2 border border-[#cedbde] rounded focus:outline-none focus:ring-2 focus:ring-[#52AFC9]"
            placeholder="Confirmer le mot de passe"
          />
        </div>

        <div *ngIf="registerForm.errors?.['passwordMismatch'] && registerForm.touched" class="text-red-500 text-sm">
          Les mots de passe ne correspondent pas.
        </div>
        
        @if (errorMessage) {
        <div class="text-red-500 text-sm mt-2">{{ errorMessage }}</div>
        }

        <button
          type="submit"
          [disabled]="registerForm.invalid || isLoading"
          class="w-full bg-[#bdbfc0] text-white py-2 rounded-md mt-4 disabled:opacity-50 hover:bg-gray-500"
        >
          @if (isLoading) { Inscription... } @else { S'INSCRIRE }
        </button>

        <div class="mt-2 text-sm text-[#545a5b]">
          Vous avez déjà un compte?
          <a routerLink="/login" class="text-[#52AFC9]">Connectez-vous ici</a>
        </div>
        <div class="mt-6 flex items-center justify-between">
          <hr class="w-1/3 border-gray-300" />
          <hr class="w-1/3 border-gray-300" />
        </div>
      </form>
    </div>
    <div
      class="hidden md:flex w-1/2 bg-[#52AFC9] items-center justify-center relative"
    >
      <img
        src="/assets/pexels-beingsanshots-6507074.jpg"
        alt="Traveling"
        class="absolute w-full h-full object-cover z-10"
      />
    </div>
  </div>
</div>
